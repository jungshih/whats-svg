<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>Google Search API Sample</title>
  </head>
  <body style="font-family: Arial;border: 0 none;">
    <div id="branding"></div>
    <div id="content">Loading...</div>
    <script src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">google.load('search', '1');</script>
    <script src="assets/js/image-search-manager.js"></script>
    <script type="text/javascript">

    var imageSearchManager,
        contentDiv = document.getElementById('content');

    function addPaginationLinks() {
      var cursor = imageSearchManager.getCursor(),
          curPage = cursor.currentPageIndex,
          pagesDiv = document.createElement('div');
      for (var i = 0; i < cursor.pages.length; i++) {
        var page = cursor.pages[i];
        if (curPage == i) { 
          pagesDiv.innerHTML += ' ' + page.label + ' ';
        } else {
          var link = document.createElement('a');
          link.href="javascript:imageSearchManager.gotoPage("+i+');';
          // link.href="javascript:imageSearchManager.gotoPage("+i+', output);';
          link.innerHTML = page.label;
          pagesDiv.appendChild(link);
        }
      }
      contentDiv.appendChild(pagesDiv);
    }

    var output = function(res){
      if(res.status === 'success'){
        contentDiv.innerHTML = '';
        var results = res.results;
        for (var i = 0; i < results.length; i++) {
          var result = results[i];
          // if(i === 0) console.log(result);
          contentDiv.innerHTML += '<p>' + result.titleNoFormatting + '</p>';
          var newImg = document.createElement('img');
          // newImg.src = result.unescapedUrl;
          newImg.src = result.tbUrl; /* for thumbnail */
          contentDiv.appendChild(newImg);
        }

        // Now add links to additional pages of search results.
        addPaginationLinks();
      }
    

    },

    onReady = function(){
      imageSearchManager.execute('doge', output);
      imageSearchManager.getBranding(function(res){
        document.getElementById('branding').innerHTML = res;
      });
    },

    init = function(){
      imageSearchManager = new ImageSearchManager();
      imageSearchManager.ready(onReady);
    };

    init();
    </script>
  </body>
</html>
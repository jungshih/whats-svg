<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>Google Search API Sample</title>
  </head>
  <body style="font-family: Arial;border: 0 none;">
    <div id="branding"></div>
    <div id="content">Loading...</div>
    <script src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">

    

    var imageSearch;

    var contentDiv = document.getElementById('content');
        

    function addPaginationLinks() {
    
      // To paginate search results, use the cursor function.
      var cursor = imageSearch.cursor;
      console.log(cursor);
      var curPage = cursor.currentPageIndex; // check what page the app is on
      var pagesDiv = document.createElement('div');
      for (var i = 0; i < cursor.pages.length; i++) {
        var page = cursor.pages[i];
        if (curPage == i) { 

        // If we are on the current page, then don't make a link.
          var label = document.createTextNode(' ' + page.label + ' ');
          pagesDiv.appendChild(label);
        } else {

          // Create links to other pages using gotoPage() on the searcher.
          var link = document.createElement('a');
          link.href="javascript:imageSearch.gotoPage("+i+');';
          link.innerHTML = page.label;
          link.style.paddingRight = '2px';
          pagesDiv.appendChild(link);
        }
      }
      contentDiv.appendChild(pagesDiv);
    }

    function searchComplete() {

      // Check that we got results
      if (imageSearch.results && imageSearch.results.length > 0) {

        contentDiv.innerHTML = '';

        // Loop through our results, printing them to the page.
        var results = imageSearch.results;
        for (var i = 0; i < results.length; i++) {
          // For each result write it's title and image to the screen
          var result = results[i];
          if(i === 0) console.log(result);
          contentDiv.innerHTML += '<p>' + result.titleNoFormatting + '</p>';
          var newImg = document.createElement('img');
          // newImg.src = result.unescapedUrl;
          newImg.src = result.tbUrl; /* for thumbnail */

          // Put our title + image in the content
          contentDiv.appendChild(newImg);
        }

        // Now add links to additional pages of search results.
        addPaginationLinks(imageSearch);
      }
    }

    function onLoad() {
    
      imageSearch = new google.search.ImageSearch();
      imageSearch.setSearchCompleteCallback(this, searchComplete, null);
      imageSearch.execute("doge");
      
      // Include the required Google branding
      google.search.Search.getBranding('branding');
    }

    google.load('search', '1');
    google.setOnLoadCallback(onLoad);
    </script>
  </body>
</html>